# Iam Execute Context Script Problem

## Problem

    <script >
      alert("Hello World!");
      console.warn('ddd__')
    </script>

the script directly included in markdown could not be executed, but if goto https://markdown-it.github.io/, and enable `html`, it could be executed.

## Root Cause
`Iam` assign the html string to  `parent.innerHtml` to renter the output, it would not execute the script:
https://stackoverflow.com/questions/39527702/inline-javascript-not-executed

## Analysis
https://markdown-it.github.io/ use  jquery `html(content)` to render: ` $(".result-html").html(mdHtml.render(source));`
call stack: html->append->domMinip->
it has special handling if the content string has `<script>`, 

## Solution
https://stackoverflow.com/questions/2592092/executing-script-elements-inserted-with-innerhtml

```js
var setInnerHTML = function(elm, html) {
  elm.innerHTML = html;
  Array.from(elm.querySelectorAll("script")).forEach( oldScript => {
    const newScript = document.createElement("script");
    Array.from(oldScript.attributes)
      .forEach( attr => newScript.setAttribute(attr.name, attr.value) );
    newScript.appendChild(document.createTextNode(oldScript.innerHTML));
    oldScript.parentNode.replaceChild(newScript, oldScript);
  });
}
```