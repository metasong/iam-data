# IIFE
---
author: Jason Song <metaseed@gmail.com>
version: 1.0.0
tag: [javascript,Knowledge Share]
subPage: []
enable: [toc]

---

**IIFE** (Immediately Invoked Function Expression) is a JavaScript function that runs as soon as it is defined
```js
(function () {
  statements
})()

(()=>{})()

```

## Use Cases
### Avoid polluting the global namespace
```js
class A{
  a = 0; // visible within class
  funA() {
    console.log(this.a)
   }
  
  func=(()=>{
    let a =0; // visible to returned function
    return ()=>console.log(a)
    })()
 }
```
### Module Pattern
```js
const obj = (()=>{
  let privateVar =0;
  function privateFunc() {
    console.log(++privateVar);
  }
  
  return {
    publicFunc: function () {
      privateFunc();
      return this.publicVar+privateVar;
      },
    punlicVar: 0
    }
 })();

```

## For loop with var before ES6
```js
for (var i = 0; i < 2; i++) {
  setTimeout(()=>console.log(i));// 2 2
}
console.log(i); // 2
```

```js
for (var i = 0; i < 2; i++) {
  (i=>
  setTimeout(()=>console.log(i))// 0 1
   )(i);
}
console.log(i); // 2
```
ES6
```js
for (let i = 0; i < 2; i++) {
  setTimeout(()=>console.log(i))// 0 1
}

console.log(i); // Uncaught ReferenceError: i is not defined.
```
https://developer.mozilla.org/en-US/docs/Glossary/IIFE#avoid_polluting_the_global_namespace