# Angular Lifecycle hooks
---
author: Jason Song <metaseed@gmail.com>
version: 1.0.0
tag: [Angular]
subPage: []
enable: [toc]

---
* all hooks are related change detection of Angular. change detection work on component template and is desitned for template.
* change detection has 2 parts: `onChange` has all changes detected by Angular change detection, then `doCheck` for addtional code detected by the user code.
* onChange/onInit: init is only triggers at the first OnChange
* order: component element then content then view
### change detection running order of a component template
```html {2, 3-4}
<parent><!-- 0: parent element's component change detection --> <!--6: components/directives inside host's templete -->
  <comp> <!--1: element's component changes detection, the first content child of parent--> <!-- 3: components/directives inside component template -->
    <content1></content1> <!-- 2: all components/directives inside contents -->
    <content2></content2>
  </comp>
  <comp1></comp1> <!-- 4: sibling element --> <!-- 5: components/directives inside sibling element component-template -->
</parent>
```
## lifetime/change detection hooks trigger order

![](https://lh4.googleusercontent.com/jqfQIpB5PJcoOn8n9fMW466u69Fs-kS4pKMzr3nKPmLRj_T730J9MB3kBRfaI9A_T3T5PFYOsjL0lSJkl_NifKbzhOJgkZKU5bQmiZhXwz8Tcu_uT6rsSlA8gFF5hl-YBRybh0RA)

1. constructor: directive/component created
1. input property setter: the directive's input property set one by one, we could handle change in the property setter just for that input property
1. change detection runs on component's element
    1. ngOnChanges that happens after all input properties are set and the parameter contains all the changes of inputs, we could handle changes that related to several inputs here ->
    1. ngOnInit just happens the first time after ngOnChanges, means directive/component created and Input properties set, means fully initiallized ->
    1. ngDoCheck: to dectect additional changes that may happens and can not detected by Angular change dectection (not from input value changes, any others?). i.e. in async pipe from the observerable 
1. change detection runs on component element's content inside the host template
    1. afterContentInit: get notified after the first time of all contents' change detection: onChange/onInit
       > content is a part of view inside the host-component template, and it's the children of the component element.
    1. afterContentChecked: get notified after all contents' additional check happened: doCheck
1. then go inside the template from the element of component.
   1. afterViewInit: for all components/directives inside the component template, the first time change detection has run.
      > afterViewInit: means the first change dection round has complete, so the @ViewChild(ren) @ContentChild(ren) queries that with static: false(default), would get its value assigned.(static: true, query and value assigned after create, that means at OnInit we could get the value), fire 1 time at the first change detection round
    1. afterViewChecked: for all components/directives inside the component template,  additional checks from their code have run. fire at every change detection round



need to look hook sequence between the parent and child.
## Note

* xxxInit means the first time of xxxcheck, xxxcheck happens very time of change detection.



## Refrences
https://angular.io/guide/lifecycle-hooks



a